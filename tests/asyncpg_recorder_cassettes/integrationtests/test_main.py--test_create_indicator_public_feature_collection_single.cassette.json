{"3858890292": {"results": [{"total_dlm": 3615, "present_in_both": 3057, "only_osm": 0, "only_dlm": 558, "missing_both": 0, "present_in_both_agree": 2076, "present_in_both_not_agree": 981}], "query": "WITH bpoly AS (\n    SELECT\n        -- split multipolygon into individual polygons\n    (ST_Dump (ST_SetSRID (ST_GeomFromGeoJSON ($1), 4326))).geom AS geometry\n)\n\nselect\n    COUNT(*) as total_dlm,\n        SUM(\n                CASE\n                    WHEN surface is not NULL AND ofm is not NULL THEN 1\n                    ELSE 0\n                END\n            ) AS present_in_both,\n        SUM(\n            CASE\n                WHEN surface is not NULL AND ofm is NULL THEN 1\n                ELSE 0\n            END\n        ) AS only_osm,\n        SUM(\n                CASE\n                    WHEN surface IS NULL AND ofm IS NOT NULL THEN 1\n                    ELSE 0\n                end\n            ) AS only_dlm,\n        SUM(\n            CASE\n                WHEN surface is NULL AND ofm is NULL THEN 1\n                ELSE 0\n            END\n        ) AS missing_both,\n        SUM(\n            CASE\n                WHEN surface is not NULL\n                     AND ofm is not NULL\n                     AND surface = ofm THEN 1\n                ELSE 0\n            END\n        ) AS present_in_both_agree,\n        SUM(\n            CASE\n                WHEN surface is not NULL\n                     AND ofm is not NULL\n                     AND surface != ofm THEN 1\n                ELSE 0\n            END\n        ) AS present_in_both_not_agree\nFROM road_thematic_accuracy as ora, bpoly b\nWHERE\n    ST_Intersects(ora.geom, b.geometry);\n", "args": ["{\"coordinates\": [[[6.965326, 49.255223], [6.965326, 49.221276], [7.019481, 49.221276], [7.019481, 49.255223], [6.965326, 49.255223]]], \"type\": \"Polygon\"}"], "limit": 0, "timeout": null, "record_class": null}, "405517529": {"results": [{"total_dlm": 3615, "present_in_both": 101, "only_osm": 0, "only_dlm": 513, "missing_both": 160, "present_in_both_agree": 0, "present_in_both_not_agree": 0}], "query": "WITH bpoly AS (\n    SELECT\n        -- split multipolygon into individual polygons\n    (ST_Dump (ST_SetSRID (ST_GeomFromGeoJSON ($1), 4326))).geom AS geometry\n)\n\nselect\n    COUNT(*) as total_dlm,\n        SUM(\n            CASE\n                WHEN lanes is not NULL AND fsz is not NULL\n                     AND (name is not NULL or ref is not null) AND nam is not NULL\n                     AND oneway is not NULL AND far is not NULL\n                     AND surface is not NULL AND ofm is not NULL\n                     AND width is not NULL AND brf is not NULL THEN 1\n                ELSE 0\n            END\n        ) AS present_in_both,\n        SUM(\n        CASE\n            WHEN lanes is not NULL AND fsz is NULL\n                 AND (name is not NULL or ref is not NULL) AND nam is NULL\n                 AND oneway is not NULL AND far is NULL\n                 AND surface is not NULL AND ofm is NULL\n                 AND width is not NULL AND brf is NULL THEN 1\n            ELSE 0\n        END\n    ) AS only_osm,\n\t\tSUM(\n\t\t\tCASE\n\t\t\t\tWHEN lanes IS NULL AND fsz IS NOT NULL\n\t\t\t\t     AND name is NULL AND ref is NULL AND nam is not NULL\n                     AND oneway is NULL AND far is not NULL\n                     AND surface is NULL AND ofm is not NULL\n                     AND width is NULL AND brf is not NULL THEN 1\n\t\t\t\tELSE 0\n\t\t\tend\n\t\t) AS only_dlm,\n        SUM(\n        CASE\n            WHEN (lanes is NULL AND fsz is NULL)\n                 OR (name is NULL AND ref is NULL AND nam is NULL)\n                 OR (oneway is NULL AND far is NULL)\n                 OR (surface is NULL AND ofm is NULL)\n                 OR (width is NULL AND brf is NULL) THEN 1\n            ELSE 0\n        END\n        ) AS missing_both,\n        SUM(\n            CASE\n                WHEN lanes is not NULL\n                     AND fsz is not NULL\n                     AND (name is not NULL or ref is not null) AND nam is not NULL\n                     AND oneway is not NULL AND far is not NULL\n                     AND surface is not NULL AND ofm is not NULL\n                     AND width is not NULL AND brf is not NULL\n                     AND lanes = fsz\n\t\t             AND lev_ratio >= 0.8\n                     AND oneway = far\n                     AND ((angle_osm > 0 AND angle_dlm > 0) OR (angle_osm < 0 AND angle_dlm < 0))\n                     AND surface = ofm\n                     AND abs(width - brf) > 1\n                    THEN 1\n                ELSE 0\n            END\n        ) AS present_in_both_agree,\n            SUM(\n            CASE\n                WHEN lanes is not NULL\n                     AND fsz is not NULL\n                     AND (name is not NULL or ref is not null) AND nam is not NULL\n                     AND oneway is not NULL AND far is not NULL\n                     AND surface is not NULL AND ofm is not NULL\n                     AND width is not NULL AND brf is not NULL\n                     AND lanes != fsz\n                     AND lev_ratio < 0.8\n                     AND (oneway != far\n                     OR ((angle_osm < 0 AND angle_dlm > 0) OR (angle_osm < 0 AND angle_dlm > 0)))\n                     AND surface != ofm\n                     AND abs(width - brf) <= 1\n                     THEN 1\n                ELSE 0\n            END\n        ) AS present_in_both_not_agree\nFROM road_thematic_accuracy as ora, bpoly b\nWHERE\n    ST_Intersects(ora.geom, b.geometry);\n", "args": ["{\"coordinates\": [[[6.965326, 49.255223], [6.965326, 49.221276], [7.019481, 49.221276], [7.019481, 49.255223], [6.965326, 49.255223]]], \"type\": \"Polygon\"}"], "limit": 0, "timeout": null, "record_class": null}}